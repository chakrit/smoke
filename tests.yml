---
config:
  interpreter: /bin/sh
  timeout: 5s
checks:
  - exitcode
  - stdout
  - stderr
tests:
  - name: Basics
    commands:
      - go build -o ./bin/smoke -v .
      - goimports -l *.go checks/*.go engine/*.go internal/p/*.go specs/*.go
      - ./bin/smoke
  - name: Unit Tests
    commands:
      - go test -v ./...
  - name: Smoke Tests
    commands:
      - go build -o ./bin/smoke -v .
      - ./bin/smoke --no-color --list tests.yml
  - name: Errors
    commands:
      - unknowncommand_asdfqwerzcxv # should error
  - name: Run Configs
    tests:
      - name: WorkDir
        config:
          workdir: ./internal/p
        commands:
          - ls # should list the files in internal/p
      - name: Env
        config:
          env:
            - "YEAS_ITS=Working"
        commands:
          - echo $YEAS_ITS
